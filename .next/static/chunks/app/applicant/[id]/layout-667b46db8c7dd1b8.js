(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[160],{3642:(e,t,s)=>{Promise.resolve().then(s.bind(s,72370))},72370:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(95155),a=s(12115),n=s(83703);function i(e){let{children:t,params:s}=e,{id:i}=(0,a.use)(s);return(0,r.jsx)(n.W,{id:i,children:t})}},27923:(e,t,s)=>{"use strict";s.d(t,{K:()=>S});var r=s(2615);let a=(e,t)=>{t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t))},n={token:null,expiry:0},i=async()=>{let e=Date.now();if(n.token&&n.expiry>e)return n.token;let t=await (0,r.getSession)();return t&&t.user.accessToken?(n.token=t.user.accessToken,n.expiry=e+3e5,n.token):null},o=e=>{e.interceptors.request.use(async e=>{try{let t=await i();t&&a(e,t)}catch(e){console.error("Error fetching token",e)}return e},e=>Promise.reject(e))};var c=s(82651);class u{async refreshToken(){return S.responseHandler(await S.get("auth/refresh"))}}let l=new u,h=async e=>{let t=await (0,r.getSession)(),s=null==t?void 0:t.user.refreshToken;e.interceptors.response.use(e=>e,async e=>{if(console.log("2 refresh ::::"),e.response){if(401===e.response.status){if(s)return await (0,r.getSession)().then(t=>{if(t){var s,r;(null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.refreshToken)&&a(e.config,null==t?void 0:null===(r=t.user)||void 0===r?void 0:r.refreshToken)}}),l.refreshToken().then(e=>e).then(t=>(a(e.config,t.accessToken),c.A.request(e.config))).catch(()=>{});console.log("8 refresh ::::")}}else{if(console.log("3 refresh ::::"),"Network Error"===e.message)throw console.log("4 refresh ::::"),console.error("Network error - server is probably down"),e;throw console.log("5 refresh ::::"),console.error("Unknown error",e),e}return e.response})},p=function(e){if(e.status>=200&&e.status<300)return e;throw e.data};class d{static getInstance(){return d.instance||(d.instance=c.A.create({baseURL:"https://whale-app-z5sve.ondigitalocean.app/api/",timeout:12e4})),d.instance}}let f=e=>{o(e),h(e)};class g{responseHandler(e){let{data:t}=e;return t}async get(e,t){return p(await this._httpClient.get(e,t))}async post(e,t,s){return p(await this._httpClient.post(e,t,s))}async patch(e,t,s){return p(await this._httpClient.patch(e,t,s))}async put(e,t,s){return p(await this._httpClient.put(e,t,s))}async delete(e,t,s){let r=s||{};return t&&(r.data=t),p(await this._httpClient.delete(e,r))}constructor(){this._httpClient=d.getInstance(),f(this._httpClient)}}let S=new g},83703:(e,t,s)=>{"use strict";s.d(t,{W:()=>c,Y:()=>u});var r=s(95155),a=s(12115),n=s(27923),i=s(2615);let o=(0,a.createContext)(void 0),c=e=>{let{children:t,id:s}=e,{data:c,status:u}=(0,i.useSession)(),[l,h]=(0,a.useState)(),[p,d]=(0,a.useState)(!0),[f,g]=(0,a.useState)(null),[S,k]=(0,a.useState)(""),[v,w]=(0,a.useState)(""),[y,_]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[C,b]=(0,a.useState)(""),[T,j]=(0,a.useState)([]),[E,N]=(0,a.useState)([]),[A,P]=(0,a.useState)([]),[K,q]=(0,a.useState)([]),[z,H]=(0,a.useState)([]),[I,O]=(0,a.useState)([]),[U,W]=(0,a.useState)([]),[B,D]=(0,a.useState)([]),[L,R]=(0,a.useState)([]),[Y,F]=(0,a.useState)([]),[G,J]=(0,a.useState)([]),[M,Q]=(0,a.useState)([]),[V,X]=(0,a.useState)([]),[Z,$]=(0,a.useState)([]),[ee,et]=(0,a.useState)([]),[es,er]=(0,a.useState)([]),[ea,en]=(0,a.useState)([]),[ei,eo]=(0,a.useState)({experience:[],education:[],projects:[],courses:[],certificates:[],languages:[],socials:[],skills:[]}),ec=async()=>{d(!0);try{var e;if(null==c?void 0:null===(e=c.user)||void 0===e?void 0:e.accessToken){let e=(await n.K.get("cv/".concat(s))).data;h(e),k(e.firstName),w(e.lastName),_(e.email),x(e.phone),b(e.summary),j(e.skills),N(e.skills),P(e.hobbies),q(e.experience),H(e.experience),O(e.projects),W(e.projects),D(e.educations),R(e.educations),F(e.certificates),J(e.certificates),Q(e.courses),X(e.courses),$(e.socials),et(e.socials),er(e.languages),en(e.languages)}}catch(e){g(e.message)}finally{d(!1)}},eu=async()=>{try{d(!0),await n.K.put("/cv/".concat(null==l?void 0:l.id),{firstName:S,lastName:v,email:y,phone:m,summary:C,skills:T,hobbies:A,experience:K,projects:I,educations:B,certificates:Y,courses:M,socials:Z,languages:es,delete:{expirience:ei.experience,education:ei.education,projects:ei.projects,courses:ei.courses,certificates:ei.certificates,languages:ei.languages,socials:ei.socials,skills:ei.skills}}),ec()}catch(e){g(e.message)}finally{d(!1)}};return(0,a.useEffect)(()=>{"authenticated"===u&&ec()},[u,c,s]),(0,r.jsx)(o.Provider,{value:{applicant:l,loading:p,error:f,firstName:S,setFirstName:k,lastName:v,setLastName:w,email:y,setEmail:_,phone:m,setPhone:x,summary:C,setSummary:b,skills:T,setSkills:j,currentSkills:E,setCurrentSkills:N,hobbies:A,setHobbies:P,experience:K,setExperience:q,currentExperience:z,setCurrentExperience:H,projects:I,setProjects:O,currentProjects:U,setCurrentProjects:W,educations:B,setEducations:D,currentEducations:L,setCurrentEducations:R,certificates:Y,setCertificates:F,currentCertificates:G,setCurrentCertificates:J,courses:M,setCourses:Q,currentCourses:V,setCurrentCourses:X,socials:Z,setSocials:$,currentSocials:ee,setCurrentSocials:et,languages:es,setLanguages:er,currentLanguages:ea,setCurrentLanguages:en,deleteItems:ei,setDeleteItems:eo,updateApplicant:eu},children:t})},u=()=>{let e=(0,a.useContext)(o);if(!e)throw Error("useApplicant must be used within an ApplicantProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[825,441,517,358],()=>t(3642)),_N_E=e.O()}]);