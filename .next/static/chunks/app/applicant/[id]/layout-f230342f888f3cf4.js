(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[160],{3642:(e,t,s)=>{Promise.resolve().then(s.bind(s,2370))},2370:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5155),r=s(2115),n=s(3703);function c(e){let{children:t,params:s}=e,{id:c}=(0,r.use)(s);return(0,a.jsx)(n.W,{id:c,children:t})}},7923:(e,t,s)=>{"use strict";s.d(t,{K:()=>g});var a=s(2615);let r=(e,t)=>{t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t))},n={token:null,expiry:0},c=async()=>{let e=Date.now();if(n.token&&n.expiry>e)return n.token;let t=await (0,a.getSession)();return t&&t.user.accessToken?(n.token=t.user.accessToken,n.expiry=e+3e5,n.token):null},i=e=>{e.interceptors.request.use(async e=>{try{let t=await c();t&&r(e,t)}catch(e){console.error("Error fetching token",e)}return e},e=>Promise.reject(e))};var o=s(2651);class u{async refreshToken(){return g.responseHandler(await g.get("auth/refresh"))}}let l=new u,p=async e=>{let t=await (0,a.getSession)(),s=null==t?void 0:t.user.refreshToken;e.interceptors.response.use(e=>e,async e=>{if(console.log("2 refresh ::::"),e.response){if(401===e.response.status){if(s)return await (0,a.getSession)().then(t=>{if(t){var s,a;(null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.refreshToken)&&r(e.config,null==t?void 0:null===(a=t.user)||void 0===a?void 0:a.refreshToken)}}),l.refreshToken().then(e=>e).then(t=>(r(e.config,t.accessToken),o.A.request(e.config))).catch(()=>{});console.log("8 refresh ::::")}}else{if(console.log("3 refresh ::::"),"Network Error"===e.message)throw console.log("4 refresh ::::"),console.error("Network error - server is probably down"),e;throw console.log("5 refresh ::::"),console.error("Unknown error",e),e}return e.response})},h=function(e){if(e.status>=200&&e.status<300)return e;throw e.data};class v{static getInstance(){return v.instance||(v.instance=o.A.create({baseURL:"https://arrow-agency-back-production.up.railway.app/api/",timeout:12e4})),v.instance}}let d=e=>{i(e),p(e)};class f{responseHandler(e){let{data:t}=e;return t}async get(e,t){return h(await this._httpClient.get(e,t))}async post(e,t,s){return h(await this._httpClient.post(e,t,s))}async patch(e,t,s){return h(await this._httpClient.patch(e,t,s))}async put(e,t,s){return h(await this._httpClient.put(e,t,s))}async delete(e,t,s){let a=s||{};return t&&(a.data=t),h(await this._httpClient.delete(e,a))}constructor(){this._httpClient=v.getInstance(),d(this._httpClient)}}let g=new f},3703:(e,t,s)=>{"use strict";s.d(t,{W:()=>o,Y:()=>u});var a=s(5155),r=s(2115),n=s(7923),c=s(2615);let i=(0,r.createContext)(void 0),o=e=>{let{children:t,id:s}=e,{data:o,status:u}=(0,c.useSession)(),[l,p]=(0,r.useState)(),[h,v]=(0,r.useState)(!0),[d,f]=(0,r.useState)(null),[g,S]=(0,r.useState)(""),[k,w]=(0,r.useState)(""),[y,m]=(0,r.useState)(""),[_,x]=(0,r.useState)(""),[C,b]=(0,r.useState)(""),[T,j]=(0,r.useState)(""),[N,E]=(0,r.useState)([]),[A,I]=(0,r.useState)([]),[P,K]=(0,r.useState)([]),[q,H]=(0,r.useState)([]),[O,U]=(0,r.useState)([]),[W,z]=(0,r.useState)([]),[B,D]=(0,r.useState)([]),[L,R]=(0,r.useState)([]),[Y,F]=(0,r.useState)([]),[G,J]=(0,r.useState)([]),[M,Q]=(0,r.useState)([]),[V,X]=(0,r.useState)([]),[Z,$]=(0,r.useState)([]),[ee,et]=(0,r.useState)([]),[es,ea]=(0,r.useState)([]),[er,en]=(0,r.useState)([]),[ec,ei]=(0,r.useState)([]),[eo,eu]=(0,r.useState)({experience:[],education:[],projects:[],courses:[],certificates:[],languages:[],socials:[],skills:[]}),[el,ep]=(0,r.useState)(""),eh=async()=>{v(!0);try{var e;if(null==o?void 0:null===(e=o.user)||void 0===e?void 0:e.accessToken){let e=(await n.K.get("applicant/".concat(s))).data;p(e),ep(e.templateId),w(e.cv.firstName),S(e.cv.companyName),m(e.cv.lastName),x(e.cv.email),b(e.cv.phone),j(e.cv.summary),E(e.cv.skills),I(e.cv.skills),K(e.cv.hobbies),H(e.cv.experience),U(e.cv.experience),z(e.cv.projects),D(e.cv.projects),R(e.cv.educations),F(e.cv.educations),J(e.cv.certificates),Q(e.cv.certificates),X(e.cv.courses),$(e.cv.courses),et(e.cv.socials),ea(e.cv.socials),en(e.cv.languages),ei(e.cv.languages)}}catch(e){f(e.message)}finally{v(!1)}},ev=async()=>{try{v(!0),await n.K.put("/cv/".concat(null==l?void 0:l.cvId,"?templateId=").concat(el),{firstName:k,lastName:y,email:_,phone:C,summary:T,skills:N||[],hobbies:P,experience:q,projects:W,educations:L,certificates:G,courses:V,socials:ee,languages:er,delete:{expirience:eo.experience,education:eo.education,projects:eo.projects,courses:eo.courses,certificates:eo.certificates,languages:eo.languages,socials:eo.socials,skills:eo.skills}}),eh()}catch(e){f(e.message)}finally{v(!1)}};return(0,r.useEffect)(()=>{"authenticated"===u&&eh()},[u,o,s]),(0,a.jsx)(i.Provider,{value:{applicant:l,loading:h,error:d,companyName:g,setCompanyName:S,firstName:k,setFirstName:w,lastName:y,setLastName:m,email:_,setEmail:x,phone:C,setPhone:b,summary:T,setSummary:j,skills:N,setSkills:E,currentSkills:A,setCurrentSkills:I,hobbies:P,setHobbies:K,experience:q,setExperience:H,currentExperience:O,setCurrentExperience:U,projects:W,setProjects:z,currentProjects:B,setCurrentProjects:D,educations:L,setEducations:R,currentEducations:Y,setCurrentEducations:F,certificates:G,setCertificates:J,currentCertificates:M,setCurrentCertificates:Q,courses:V,setCourses:X,currentCourses:Z,setCurrentCourses:$,socials:ee,setSocials:et,currentSocials:es,setCurrentSocials:ea,languages:er,setLanguages:en,currentLanguages:ec,setCurrentLanguages:ei,deleteItems:eo,setDeleteItems:eu,templateId:el,setTemplateId:ep,updateApplicant:ev},children:t})},u=()=>{let e=(0,r.useContext)(i);if(!e)throw Error("useApplicant must be used within an ApplicantProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[825,441,517,358],()=>t(3642)),_N_E=e.O()}]);