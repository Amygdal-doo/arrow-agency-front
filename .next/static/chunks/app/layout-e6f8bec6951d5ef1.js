(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{32327:(e,t,s)=>{Promise.resolve().then(s.bind(s,76074)),Promise.resolve().then(s.t.bind(s,65688,23)),Promise.resolve().then(s.t.bind(s,39432,23)),Promise.resolve().then(s.t.bind(s,19324,23)),Promise.resolve().then(s.bind(s,35482)),Promise.resolve().then(s.bind(s,19038)),Promise.resolve().then(s.bind(s,91620))},79785:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var a=s(95155),r=s(69606),l=s(43415),n=s(85060),i=s(12115),o=s(2615);let c=l.z.object({email:l.z.string().email({message:"Invalid email address."}),password:l.z.string().min(6,{message:"Password must be at least 6 characters."})}),d=e=>{let{toggleContent:t,onClose:s}=e,[l]=(0,i.useState)(!1),[d,u]=(0,i.useState)(""),{register:m,handleSubmit:x,formState:{errors:h}}=(0,r.mN)({resolver:(0,n.u)(c)}),p=async e=>{u(""),console.log("login data",e);let t=await (0,o.signIn)("credentials",{email:e.email,password:e.password,redirect:!1});if(t&&s(),null==t?void 0:t.error){console.error("Sign-in error:",t.error),u(t.error);return}};return(0,a.jsxs)("form",{onSubmit:x(p),className:"w-full max-w-md mx-auto space-y-4 pb-16 pt-8 px-8 rounded-md shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex justify-center flex-col items-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-text-[#0a0a23] pr-10",children:"Amygdal"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600 pl-20",children:"CV Editor"})]}),(0,a.jsx)("div",{className:"py-4 px-16",children:(0,a.jsx)("p",{className:"text-gray-500 font-medium text-center",children:"Please enter your email and password to log in."})}),d&&(0,a.jsx)("p",{className:"text-red-500 text-sm text-center",children:d}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold",children:"Email"}),(0,a.jsx)("input",{...m("email"),type:"email",className:"w-full border p-2 rounded"}),h.email&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:h.email.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold",children:"Password"}),(0,a.jsx)("input",{...m("password"),type:"password",className:"w-full border p-2 rounded"}),h.password&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:h.password.message})]}),(0,a.jsxs)("p",{className:"text-gray-500 font-medium text-md",children:["Don't have an account?",(0,a.jsxs)("span",{onClick:t,className:"text-purple-600 font-bold cursor-pointer",children:[" ","Sign up here"]})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-purple-600 text-sm font-bold text-white p-2 rounded",disabled:l,children:l?"Logging in...":"Login"})]})}},80531:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(95155),r=s(23753);let l=e=>{let{isOpen:t,onClose:s,children:l}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-[#0a0a23] bg-opacity-50 z-50",children:(0,a.jsxs)("div",{className:"relative bg-white rounded-lg shadow-lg w-full max-w-md mx-auto",children:[(0,a.jsx)("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close",children:(0,a.jsx)(r.A,{className:"w-6 h-6"})}),l]})}):null}},76074:(e,t,s)=>{"use strict";s.d(t,{default:()=>h});var a=s(95155),r=s(5565),l=s(48173),n=s.n(l),i=s(12115),o=s(79785),c=s(80531),d=s(97229),u=s(2615),m=s(91620),x=s(76046);let h=()=>{var e,t,s,l;let h=(0,x.useRouter)(),{data:p,status:f}=(0,u.useSession)(),{profile:g}=(0,m.x)(),[v,b]=(0,i.useState)(!1),[j,w]=(0,i.useState)(!1),N=()=>{w(!j)},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(e.charAt(0)).concat(t.charAt(0)).toUpperCase()};return(0,a.jsxs)("nav",{className:"w-full bg-black p-1",children:[(0,a.jsxs)("div",{className:"container mx-auto flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-16",children:[(0,a.jsx)(n(),{href:"/",children:(0,a.jsx)(r.default,{src:"/arrow.png",alt:"Arrow",height:3e3,width:4e3,className:"w-24"})}),(0,a.jsxs)("ul",{className:"flex space-x-10",children:[(0,a.jsx)(n(),{href:"/for-talent",children:(0,a.jsx)("li",{className:"text-white hover:underline font-medium text-xl",children:"Jobs"})}),(0,a.jsx)(n(),{href:"/for-talent",children:(0,a.jsx)("li",{className:"text-white hover:underline font-medium text-xl",children:"For Talent"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:["authenticated"===f&&(null==p?void 0:null===(e=p.user)||void 0===e?void 0:e.accessToken)&&(0,a.jsx)("button",{onClick:()=>h.push("/profile"),className:"w-10 h-10 flex items-center justify-center bg-gray-700 text-white rounded-full text-sm font-bold",children:(null==g?void 0:g.user)?y(g.user.firstName,g.user.lastName):y(null===(t=p.user.profile)||void 0===t?void 0:t.firstName,null===(s=p.user.profile)||void 0===s?void 0:s.lastName)}),(0,a.jsx)("button",{onClick:()=>{var e;"authenticated"===f&&(null==p?void 0:null===(e=p.user)||void 0===e?void 0:e.accessToken)?(0,u.signOut)():b(!0)},className:"bg-white px-6 py-2 rounded-md text-[#0a0a23] font-bold",children:"authenticated"===f&&(null==p?void 0:null===(l=p.user)||void 0===l?void 0:l.accessToken)?"Log out":"Login"}),(0,a.jsx)(n(),{href:"/post-job",children:(0,a.jsx)("button",{className:"bg-orange-600 hover:bg-orange-400 px-6 py-2 rounded-md text-white font-bold",children:"Post a Job"})})]})]}),(0,a.jsx)(c.A,{isOpen:v,onClose:()=>b(!1),children:j?(0,a.jsx)(o.A,{toggleContent:N,onClose:()=>b(!1)}):(0,a.jsx)(d.A,{toggleContent:N})})]})}},97229:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var a=s(95155),r=s(27923),l=s(85060),n=s(12115),i=s(69606),o=s(43415);let c=o.z.object({firstName:o.z.string().min(2,{message:"First name must be at least 2 characters."}),lastName:o.z.string().min(2,{message:"Last name must be at least 2 characters."}),email:o.z.string().email({message:"Invalid email address."}),password:o.z.string().min(6,{message:"Password must be at least 6 characters."})}),d=e=>{let{toggleContent:t}=e,[s,o]=(0,n.useState)(!1),[d,u]=(0,n.useState)(""),{register:m,handleSubmit:x,formState:{errors:h}}=(0,i.mN)({resolver:(0,l.u)(c)}),p=async e=>{console.log("Registration successful:",e),o(!0),u("");try{await r.K.post("auth/register",e),t()}catch(e){u("Failed to register. Please try again. Error: ".concat(JSON.stringify(e)))}finally{o(!1)}};return(0,a.jsxs)("form",{onSubmit:x(p),className:"w-full max-w-md mx-auto space-y-4 pb-16 pt-8 px-8 rounded-md shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex justify-center flex-col items-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-text-[#0a0a23] pr-10",children:"Amygdal"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600 pl-20",children:"CV Editor"})]}),(0,a.jsx)("div",{className:"py-4 px-16",children:(0,a.jsx)("p",{className:"text-gray-500 font-medium text-center",children:"Please enter your details to create an account."})}),d&&(0,a.jsx)("p",{className:"text-red-500 text-sm text-center",children:d}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold",children:"First Name"}),(0,a.jsx)("input",{...m("firstName"),type:"text",className:"w-full border p-2 rounded"}),h.firstName&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:h.firstName.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold",children:"Last Name"}),(0,a.jsx)("input",{...m("lastName"),type:"text",className:"w-full border p-2 rounded"}),h.lastName&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:h.lastName.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold",children:"Email"}),(0,a.jsx)("input",{...m("email"),type:"email",className:"w-full border p-2 rounded"}),h.email&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:h.email.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold",children:"Password"}),(0,a.jsx)("input",{...m("password"),type:"password",className:"w-full border p-2 rounded"}),h.password&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:h.password.message})]}),(0,a.jsxs)("p",{className:"text-gray-500 font-medium text-md",children:["Already have an account?",(0,a.jsxs)("span",{onClick:t,className:"text-purple-600 font-bold cursor-pointer",children:[" ","Log in here"]})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-purple-600 text-sm font-bold text-white p-2 rounded",disabled:s,children:s?"Registering...":"Register"})]})}},27923:(e,t,s)=>{"use strict";s.d(t,{K:()=>f});var a=s(2615);let r=(e,t)=>{t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t))},l={token:null,expiry:0},n=async()=>{let e=Date.now();if(l.token&&l.expiry>e)return l.token;let t=await (0,a.getSession)();return t&&t.user.accessToken?(l.token=t.user.accessToken,l.expiry=e+3e5,l.token):null},i=e=>{e.interceptors.request.use(async e=>{try{let t=await n();t&&r(e,t)}catch(e){console.error("Error fetching token",e)}return e},e=>Promise.reject(e))};var o=s(82651);class c{async refreshToken(){return f.responseHandler(await f.get("auth/refresh"))}}let d=new c,u=async e=>{let t=await (0,a.getSession)(),s=null==t?void 0:t.user.refreshToken;e.interceptors.response.use(e=>e,async e=>{if(console.log("2 refresh ::::"),e.response){if(401===e.response.status){if(s)return await (0,a.getSession)().then(t=>{if(t){var s,a;(null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.refreshToken)&&r(e.config,null==t?void 0:null===(a=t.user)||void 0===a?void 0:a.refreshToken)}}),d.refreshToken().then(e=>e).then(t=>(r(e.config,t.accessToken),o.A.request(e.config))).catch(()=>{});console.log("8 refresh ::::")}}else{if(console.log("3 refresh ::::"),"Network Error"===e.message)throw console.log("4 refresh ::::"),console.error("Network error - server is probably down"),e;throw console.log("5 refresh ::::"),console.error("Unknown error",e),e}return e.response})},m=function(e){if(e.status>=200&&e.status<300)return e;throw e.data};class x{static getInstance(){return x.instance||(x.instance=o.A.create({baseURL:"https://whale-app-z5sve.ondigitalocean.app/api/",timeout:12e4})),x.instance}}let h=e=>{i(e),u(e)};class p{responseHandler(e){let{data:t}=e;return t}async get(e,t){return m(await this._httpClient.get(e,t))}async post(e,t,s){return m(await this._httpClient.post(e,t,s))}async patch(e,t,s){return m(await this._httpClient.patch(e,t,s))}async put(e,t,s){return m(await this._httpClient.put(e,t,s))}async delete(e,t,s){let a=s||{};return t&&(a.data=t),m(await this._httpClient.delete(e,a))}constructor(){this._httpClient=x.getInstance(),h(this._httpClient)}}let f=new p},35482:(e,t,s)=>{"use strict";s.d(t,{ApplicantsProvider:()=>o,B:()=>c});var a=s(95155),r=s(12115),l=s(27923),n=s(2615);let i=(0,r.createContext)({applicants:[],loading:!1,error:null,page:1,setPage:()=>{},limit:6,setLimit:()=>{},type:"asc",setType:()=>{},technologies:[],setTechnologies:()=>{},pages:1,fetchApplicants:async()=>{}}),o=e=>{let{children:t}=e,[s,o]=(0,r.useState)([]),[c,d]=(0,r.useState)(!0),[u,m]=(0,r.useState)(null),[x,h]=(0,r.useState)(1),[p,f]=(0,r.useState)(6),[g,v]=(0,r.useState)("asc"),[b,j]=(0,r.useState)([]),[w,N]=(0,r.useState)(1),{data:y,status:k}=(0,n.useSession)(),S=async()=>{d(!0);try{var e;if(null==y?void 0:null===(e=y.user)||void 0===e?void 0:e.accessToken){let e=await l.K.get("applicant",{params:{page:x,limit:p,type:g,technologies:b}});o(e.data.results||[]),N(e.data.pages||1)}}catch(e){console.error("Error fetching applicants:",e),m("Failed to fetch applicants.")}finally{d(!1)}};return(0,r.useEffect)(()=>{"authenticated"===k&&S()},[k,y,x,p,g,b]),(0,a.jsx)(i.Provider,{value:{applicants:s,loading:c,error:u,page:x,setPage:h,limit:p,setLimit:f,type:g,setType:v,technologies:b,setTechnologies:j,pages:w,fetchApplicants:S},children:t})},c=()=>(0,r.useContext)(i)},19038:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(95155),r=s(2615);s(12115);let l=e=>(0,a.jsx)(r.SessionProvider,{children:e.children})},91620:(e,t,s)=>{"use strict";s.d(t,{ProfileProvider:()=>c,x:()=>d});var a=s(95155),r=s(12115),l=s(76046),n=s(2615),i=s(27923);let o=(0,r.createContext)({profile:null,loading:!1,fetchProfile:async()=>{}}),c=e=>{let{children:t}=e,s=(0,l.useRouter)(),{data:c,status:d}=(0,n.useSession)(),[u,m]=(0,r.useState)(null),[x,h]=(0,r.useState)(!0),p=async()=>{h(!0);try{var e;if(null==c?void 0:null===(e=c.user)||void 0===e?void 0:e.accessToken){let e=await i.K.get("user/profile");m(e.data)}}catch(e){console.error("Error fetching profile data:",e)}finally{h(!1)}};return(0,r.useEffect)(()=>{if("unauthenticated"===d){s.replace("/");return}"authenticated"===d&&p()},[d,c,s]),(0,a.jsx)(o.Provider,{value:{profile:u,loading:x,fetchProfile:p},children:t})},d=()=>(0,r.useContext)(o)},19324:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[261,825,565,606,40,334,441,517,358],()=>t(32327)),_N_E=e.O()}]);