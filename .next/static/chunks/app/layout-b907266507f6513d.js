(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2558:(e,s,t)=>{Promise.resolve().then(t.bind(t,6188)),Promise.resolve().then(t.t.bind(t,5688,23)),Promise.resolve().then(t.t.bind(t,7051,23)),Promise.resolve().then(t.t.bind(t,9324,23)),Promise.resolve().then(t.bind(t,6657))},531:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var r=t(5155),a=t(3753);let l=e=>{let{isOpen:s,onClose:t,children:l}=e;return s?(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-[#0a0a23] bg-opacity-50 z-50",children:(0,r.jsxs)("div",{className:"relative bg-white rounded-lg shadow-lg w-full max-w-md mx-auto",children:[(0,r.jsx)("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close",children:(0,r.jsx)(a.A,{className:"w-6 h-6"})}),l]})}):null}},6188:(e,s,t)=>{"use strict";t.d(s,{default:()=>b});var r=t(5155),a=t(5565),l=t(8173),n=t.n(l),i=t(2115),o=t(9606),c=t(3415),d=t(2679),m=t(2615);let x=c.z.object({email:c.z.string().email({message:"Invalid email address."}),password:c.z.string().min(6,{message:"Password must be at least 6 characters."})}),u=e=>{let{toggleContent:s}=e,[t]=(0,i.useState)(!1),[a,l]=(0,i.useState)(""),{register:n,handleSubmit:c,formState:{errors:u}}=(0,o.mN)({resolver:(0,d.u)(x)}),h=async e=>{l("");let s=await (0,m.signIn)("credentials",{email:e.email,password:e.password,redirect:!1});if(null==s?void 0:s.error){console.error("Sign-in error:",s.error),l(s.error);return}console.log("session",await (0,m.getSession)())};return(0,r.jsxs)("form",{onSubmit:c(h),className:"w-full max-w-md mx-auto space-y-4 pb-16 pt-8 px-8 rounded-md shadow-2xl",children:[(0,r.jsxs)("div",{className:"flex justify-center flex-col items-center",children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-text-[#0a0a23] pr-10",children:"Amygdal"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-purple-600 pl-20",children:"CV Editor"})]}),(0,r.jsx)("div",{className:"py-4 px-16",children:(0,r.jsx)("p",{className:"text-gray-500 font-medium text-center",children:"Please enter your email and password to log in."})}),a&&(0,r.jsx)("p",{className:"text-red-500 text-sm text-center",children:a}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold",children:"Email"}),(0,r.jsx)("input",{...n("email"),type:"email",className:"w-full border p-2 rounded"}),u.email&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:u.email.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold",children:"Password"}),(0,r.jsx)("input",{...n("password"),type:"password",className:"w-full border p-2 rounded"}),u.password&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:u.password.message})]}),(0,r.jsxs)("p",{className:"text-gray-500 font-medium text-md",children:["Don't have an account?",(0,r.jsxs)("span",{onClick:s,className:"text-purple-600 font-bold cursor-pointer",children:[" ","Sign up here"]})]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-purple-600 text-sm font-bold text-white p-2 rounded",disabled:t,children:t?"Logging in...":"Login"})]})};var h=t(531),p=t(7923);let f=c.z.object({firstName:c.z.string().min(2,{message:"First name must be at least 2 characters."}),lastName:c.z.string().min(2,{message:"Last name must be at least 2 characters."}),email:c.z.string().email({message:"Invalid email address."}),password:c.z.string().min(6,{message:"Password must be at least 6 characters."})}),g=e=>{let{toggleContent:s}=e,[t,a]=(0,i.useState)(!1),[l,n]=(0,i.useState)(""),{register:c,handleSubmit:m,formState:{errors:x}}=(0,o.mN)({resolver:(0,d.u)(f)}),u=async e=>{console.log("Registration successful:",e),a(!0),n("");try{await p.K.post("auth/register",e),s()}catch(e){n("Failed to register. Please try again. Error: ".concat(JSON.stringify(e)))}finally{a(!1)}};return(0,r.jsxs)("form",{onSubmit:m(u),className:"w-full max-w-md mx-auto space-y-4 pb-16 pt-8 px-8 rounded-md shadow-2xl",children:[(0,r.jsxs)("div",{className:"flex justify-center flex-col items-center",children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-text-[#0a0a23] pr-10",children:"Amygdal"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-purple-600 pl-20",children:"CV Editor"})]}),(0,r.jsx)("div",{className:"py-4 px-16",children:(0,r.jsx)("p",{className:"text-gray-500 font-medium text-center",children:"Please enter your details to create an account."})}),l&&(0,r.jsx)("p",{className:"text-red-500 text-sm text-center",children:l}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold",children:"First Name"}),(0,r.jsx)("input",{...c("firstName"),type:"text",className:"w-full border p-2 rounded"}),x.firstName&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:x.firstName.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold",children:"Last Name"}),(0,r.jsx)("input",{...c("lastName"),type:"text",className:"w-full border p-2 rounded"}),x.lastName&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:x.lastName.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold",children:"Email"}),(0,r.jsx)("input",{...c("email"),type:"email",className:"w-full border p-2 rounded"}),x.email&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:x.email.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold",children:"Password"}),(0,r.jsx)("input",{...c("password"),type:"password",className:"w-full border p-2 rounded"}),x.password&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:x.password.message})]}),(0,r.jsxs)("p",{className:"text-gray-500 font-medium text-md",children:["Already have an account?",(0,r.jsxs)("span",{onClick:s,className:"text-purple-600 font-bold cursor-pointer",children:[" ","Log in here"]})]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-purple-600 text-sm font-bold text-white p-2 rounded",disabled:t,children:t?"Registering...":"Register"})]})},b=()=>{let[e,s]=(0,i.useState)(!1),[t,l]=(0,i.useState)(!1),o=()=>{l(!t)};return(0,r.jsxs)("nav",{className:"w-full bg-black p-1",children:[(0,r.jsxs)("div",{className:"container mx-auto flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-16",children:[(0,r.jsx)(n(),{href:"/",children:(0,r.jsx)(a.default,{src:"/arrow.png",alt:"Arrow",height:3e3,width:4e3,className:"w-24"})}),(0,r.jsxs)("ul",{className:"flex space-x-10",children:[(0,r.jsx)(n(),{href:"/for-talent",children:(0,r.jsx)("li",{className:"text-white hover:underline font-medium text-xl",children:"Jobs"})}),(0,r.jsx)(n(),{href:"/for-talent",children:(0,r.jsx)("li",{className:"text-white hover:underline font-medium text-xl",children:"For Talent"})})]})]}),(0,r.jsxs)("div",{className:"space-x-2",children:[(0,r.jsx)("button",{onClick:()=>s(!0),className:"bg-white px-6 py-2 rounded-md text-[#0a0a23] font-bold",children:"Login"}),(0,r.jsx)(n(),{href:"/post-job",children:(0,r.jsx)("button",{className:"bg-orange-600 hover:bg-orange-400 px-6 py-2 rounded-md text-white font-bold",children:"Post a Job"})})]})]}),(0,r.jsx)(h.A,{isOpen:e,onClose:()=>s(!1),children:t?(0,r.jsx)(u,{toggleContent:o}):(0,r.jsx)(g,{toggleContent:o})})]})}},7923:(e,s,t)=>{"use strict";t.d(s,{K:()=>f});var r=t(2615);let a=(e,s)=>{s&&e.headers&&(e.headers.Authorization="Bearer ".concat(s))},l={token:null,expiry:0},n=async()=>{let e=Date.now();if(l.token&&l.expiry>e)return l.token;let s=await (0,r.getSession)();return s&&s.user.accessToken?(l.token=s.user.accessToken,l.expiry=e+3e5,l.token):null},i=e=>{e.interceptors.request.use(async e=>{try{let s=await n();s&&a(e,s)}catch(e){console.error("Error fetching token",e)}return e},e=>Promise.reject(e))};var o=t(2651);class c{async refreshToken(){return f.responseHandler(await f.get("auth/refresh"))}}let d=new c,m=async e=>{let s=await (0,r.getSession)(),t=null==s?void 0:s.user.refreshToken;e.interceptors.response.use(e=>e,async e=>{if(console.log("2 refresh ::::"),e.response){if(401===e.response.status){if(t)return await (0,r.getSession)().then(s=>{if(s){var t,r;(null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.refreshToken)&&a(e.config,null==s?void 0:null===(r=s.user)||void 0===r?void 0:r.refreshToken)}}),d.refreshToken().then(e=>e).then(s=>(a(e.config,s.accessToken),o.A.request(e.config))).catch(()=>{});console.log("8 refresh ::::")}}else{if(console.log("3 refresh ::::"),"Network Error"===e.message)throw console.log("4 refresh ::::"),console.error("Network error - server is probably down"),e;throw console.log("5 refresh ::::"),console.error("Unknown error",e),e}return e.response})},x=function(e){if(e.status>=200&&e.status<300)return e;throw e.data};class u{static getInstance(){return u.instance||(u.instance=o.A.create({baseURL:"https://whale-app-z5sve.ondigitalocean.app/api",timeout:12e4})),u.instance}}let h=e=>{i(e),m(e)};class p{responseHandler(e){let{data:s}=e;return s}async get(e,s){return x(await this._httpClient.get(e,s))}async post(e,s,t){return x(await this._httpClient.post(e,s,t))}async patch(e,s,t){return x(await this._httpClient.patch(e,s,t))}async put(e,s,t){return x(await this._httpClient.put(e,s,t))}async delete(e,s,t){let r=t||{};return s&&(r.data=s),x(await this._httpClient.delete(e,r))}constructor(){this._httpClient=u.getInstance(),h(this._httpClient)}}let f=new p},6657:(e,s,t)=>{"use strict";t.d(s,{default:()=>l});var r=t(5155),a=t(2615);t(2115);let l=e=>(0,r.jsx)(a.SessionProvider,{children:e.children})},9324:()=>{}},e=>{var s=s=>e(e.s=s);e.O(0,[261,565,40,825,575,441,517,358],()=>s(2558)),_N_E=e.O()}]);