(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2327:(e,t,s)=>{Promise.resolve().then(s.bind(s,6074)),Promise.resolve().then(s.t.bind(s,5688,23)),Promise.resolve().then(s.t.bind(s,7051,23)),Promise.resolve().then(s.t.bind(s,9324,23)),Promise.resolve().then(s.bind(s,5482)),Promise.resolve().then(s.bind(s,6657)),Promise.resolve().then(s.bind(s,1620))},9785:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(5155),a=s(9606),l=s(3415),n=s(2679),o=s(2115),i=s(2615);let d=l.z.object({email:l.z.string().email({message:"Invalid email address."}),password:l.z.string().min(6,{message:"Password must be at least 6 characters."})}),c=e=>{let{toggleContent:t,onClose:s}=e,[l]=(0,o.useState)(!1),[c,u]=(0,o.useState)(""),{register:m,handleSubmit:h,formState:{errors:x}}=(0,a.mN)({resolver:(0,n.u)(d)}),p=async e=>{u(""),console.log("login data",e);let t=await (0,i.signIn)("credentials",{email:e.email,password:e.password,redirect:!1});if(t&&s(),null==t?void 0:t.error){console.error("Sign-in error:",t.error),u(t.error);return}};return(0,r.jsxs)("form",{onSubmit:h(p),className:"w-full max-w-md mx-auto space-y-4 pb-16 pt-8 px-8 rounded-md shadow-2xl",children:[(0,r.jsxs)("div",{className:"flex justify-center flex-col items-center",children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-white pr-10",children:"Amygdal"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-orange-600 pl-20",children:"CV Editor"})]}),(0,r.jsx)("div",{className:"py-4 px-16",children:(0,r.jsx)("p",{className:"text-gray-500 font-medium text-center",children:"Please enter your email and password to log in."})}),c&&(0,r.jsx)("p",{className:"text-red-500 text-sm text-center",children:c}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-300",children:"Email"}),(0,r.jsx)("input",{...m("email"),type:"email",className:"w-full border p-2 rounded"}),x.email&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:x.email.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-300",children:"Password"}),(0,r.jsx)("input",{...m("password"),type:"password",className:"w-full border p-2 rounded"}),x.password&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:x.password.message})]}),(0,r.jsxs)("p",{className:"font-medium text-md text-gray-300",children:["Don't have an account?",(0,r.jsxs)("span",{onClick:t,className:"text-orange-600 font-bold cursor-pointer",children:[" ","Sign up here"]})]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-orange-600 to-orange-700 text-white p-3 rounded-lg font-bold hover:from-orange-700 hover:to-orange-800 transition-all duration-200 shadow-lg",disabled:l,children:l?"Logging in...":"Login"})]})}},531:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(5155),a=s(3753);let l=e=>{let{isOpen:t,onClose:s,children:l}=e;return t?(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-[#0a0a23] bg-opacity-50 z-50 m-4",children:(0,r.jsxs)("div",{className:"relative bg-gray-900 rounded-lg shadow-lg w-full max-w-lg mx-auto",children:[(0,r.jsx)("button",{onClick:s,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close",children:(0,r.jsx)(a.A,{className:"w-6 h-6"})}),l]})}):null}},6074:(e,t,s)=>{"use strict";s.d(t,{default:()=>x});var r=s(5155),a=s(5565),l=s(8173),n=s.n(l),o=s(2115),i=s(9785),d=s(531),c=s(7229),u=s(2615),m=s(1620),h=s(6046);let x=()=>{let e=(0,h.useRouter)(),{data:t,status:s}=(0,u.useSession)(),{profile:l}=(0,m.x)(),[x,p]=(0,o.useState)(!1),[g,f]=(0,o.useState)(!1),[v,b]=(0,o.useState)(!1),j=()=>{f(!g)},w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(e.charAt(0)).concat(t.charAt(0)).toUpperCase()},N=()=>{var e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n(),{href:"/for-talent",children:(0,r.jsx)("li",{className:"text-white hover:underline font-medium text-lg lg:text-xl md:font-medium hover:text-orange-500 transition-colors",children:"Jobs"})}),(0,r.jsx)(n(),{href:"/for-talent",children:(0,r.jsx)("li",{className:"text-white hover:underline font-medium text-lg lg:text-xl md:font-medium hover:text-orange-500 transition-colors",children:"For Talent"})}),"authenticated"===s&&(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.accessToken)&&(0,r.jsx)(n(),{href:"/applicant",children:(0,r.jsx)("li",{className:"text-white hover:underline font-medium text-lg lg:text-xl md:font-medium hover:text-orange-500 transition-colors",children:"Applicants"})})]})},y=()=>{var a,o,i,d;return(0,r.jsxs)(r.Fragment,{children:["authenticated"===s&&(null==t?void 0:null===(a=t.user)||void 0===a?void 0:a.accessToken)&&(0,r.jsx)("button",{onClick:()=>e.push("/profile"),className:"w-12 h-12 md:w-10 md:h-10 flex items-center justify-center bg-gradient-to-r from-gray-700 to-gray-600 text-white rounded-full text-sm font-bold hover:from-gray-600 hover:to-gray-500 transition-all",children:(null==l?void 0:l.user)?w(l.user.firstName,l.user.lastName):w(null===(o=t.user.profile)||void 0===o?void 0:o.firstName,null===(i=t.user.profile)||void 0===i?void 0:i.lastName)}),(0,r.jsx)("button",{onClick:()=>{var e;"authenticated"===s&&(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.accessToken)?(0,u.signOut)():p(!0)},className:"w-full md:w-auto bg-white/10 backdrop-blur-sm px-6 py-3 md:px-3 lg:px-6 md:py-2 rounded-xl md:rounded-md text-white font-bold hover:bg-white/20 transition-all",children:"authenticated"===s&&(null==t?void 0:null===(d=t.user)||void 0===d?void 0:d.accessToken)?"Log out":"Login"}),(0,r.jsx)(n(),{href:"/post-job",className:"w-full md:w-auto",children:(0,r.jsx)("button",{className:"w-full bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-500 hover:to-orange-400 px-6 md:px-3 lg:px-6 py-3 md:py-2 rounded-xl md:rounded-md text-white font-bold transition-all",children:"Post a Job"})})]})};return(0,r.jsxs)("nav",{className:"w-full bg-black p-1 fixed top-0 left-0 right-0 h-24 z-50 shadow-lg",children:[(0,r.jsxs)("div",{className:"container mx-auto flex items-center justify-between h-full px-4",children:[(0,r.jsxs)("div",{className:"flex items-center md:space-x-16",children:[(0,r.jsx)(n(),{href:"/",children:(0,r.jsx)(a.default,{src:"/arrow.png",alt:"Arrow",height:3e3,width:4e3,className:"w-24"})}),(0,r.jsx)("ul",{className:"hidden md:flex space-x-10",children:(0,r.jsx)(N,{})})]}),(0,r.jsx)("div",{className:"hidden md:flex items-center space-x-4",children:(0,r.jsx)(y,{})}),(0,r.jsx)("button",{onClick:()=>b(!v),className:"md:hidden text-white p-2",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v?(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),v&&(0,r.jsx)("div",{className:"md:hidden fixed inset-0 z-50",children:(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-black/95 to-gray-900/95 backdrop-blur-lg",children:(0,r.jsxs)("div",{className:"flex flex-col h-full pt-28 px-6",children:[(0,r.jsx)("ul",{className:"space-y-8 mb-12",children:(0,r.jsx)(N,{})}),(0,r.jsxs)("div",{className:"mt-auto mb-12 flex flex-col space-y-4",children:[(0,r.jsx)("div",{className:"h-px w-full bg-gradient-to-r from-transparent via-gray-500/20 to-transparent mb-8"}),(0,r.jsx)(y,{})]}),(0,r.jsx)("button",{onClick:()=>b(!1),className:"absolute top-7 right-4 text-white p-2 rounded-full bg-white/10 backdrop-blur-sm",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}),(0,r.jsx)(d.A,{isOpen:x,onClose:()=>p(!1),children:g?(0,r.jsx)(i.A,{toggleContent:j,onClose:()=>p(!1)}):(0,r.jsx)(c.A,{toggleContent:j})})]})}},7229:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(5155),a=s(7923),l=s(2679),n=s(2115),o=s(9606),i=s(3415);let d=i.z.object({firstName:i.z.string().min(2,{message:"First name must be at least 2 characters."}),lastName:i.z.string().min(2,{message:"Last name must be at least 2 characters."}),email:i.z.string().email({message:"Invalid email address."}),password:i.z.string().min(6,{message:"Password must be at least 6 characters."})}),c=e=>{let{toggleContent:t}=e,[s,i]=(0,n.useState)(!1),[c,u]=(0,n.useState)(""),{register:m,handleSubmit:h,formState:{errors:x}}=(0,o.mN)({resolver:(0,l.u)(d)}),p=async e=>{console.log("Registration successful:",e),i(!0),u("");try{await a.K.post("auth/register",e),t()}catch(e){u("Failed to register. Please try again. Error: ".concat(JSON.stringify(e)))}finally{i(!1)}};return(0,r.jsxs)("form",{onSubmit:h(p),className:"w-full max-w-md mx-auto space-y-4 pb-16 pt-8 px-8 rounded-md shadow-2xl",children:[(0,r.jsxs)("div",{className:"flex justify-center flex-col items-center",children:[(0,r.jsx)("p",{className:"text-2xl font-bold text-white pr-10",children:"Amygdal"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-orange-600 pl-20",children:"CV Editor"})]}),(0,r.jsx)("div",{className:"py-4 px-16",children:(0,r.jsx)("p",{className:"text-gray-500 font-medium text-center",children:"Please enter your details to create an account."})}),c&&(0,r.jsx)("p",{className:"text-red-500 text-sm text-center",children:c}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-300",children:"First Name"}),(0,r.jsx)("input",{...m("firstName"),type:"text",className:"w-full border p-2 rounded"}),x.firstName&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:x.firstName.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-300",children:"Last Name"}),(0,r.jsx)("input",{...m("lastName"),type:"text",className:"w-full border p-2 rounded"}),x.lastName&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:x.lastName.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-300",children:"Email"}),(0,r.jsx)("input",{...m("email"),type:"email",className:"w-full border p-2 rounded"}),x.email&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:x.email.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-gray-300",children:"Password"}),(0,r.jsx)("input",{...m("password"),type:"password",className:"w-full border p-2 rounded"}),x.password&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:x.password.message})]}),(0,r.jsxs)("p",{className:"text-gray-300 font-medium text-md",children:["Already have an account?",(0,r.jsxs)("span",{onClick:t,className:"text-orange-600 font-bold cursor-pointer",children:[" ","Log in here"]})]}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-orange-600 to-orange-700 text-white p-3 rounded-lg font-bold hover:from-orange-700 hover:to-orange-800 transition-all duration-200 shadow-lg",disabled:s,children:s?"Registering...":"Register"})]})}},7923:(e,t,s)=>{"use strict";s.d(t,{K:()=>g});var r=s(2615);let a=(e,t)=>{t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t))},l={token:null,expiry:0},n=async()=>{let e=Date.now();if(l.token&&l.expiry>e)return l.token;let t=await (0,r.getSession)();return t&&t.user.accessToken?(l.token=t.user.accessToken,l.expiry=e+3e5,l.token):null},o=e=>{e.interceptors.request.use(async e=>{try{let t=await n();t&&a(e,t)}catch(e){console.error("Error fetching token",e)}return e},e=>Promise.reject(e))};var i=s(2651);class d{async refreshToken(){return g.responseHandler(await g.get("auth/refresh"))}}let c=new d,u=async e=>{let t=await (0,r.getSession)(),s=null==t?void 0:t.user.refreshToken;e.interceptors.response.use(e=>e,async e=>{if(console.log("2 refresh ::::"),e.response){if(401===e.response.status){if(s)return await (0,r.getSession)().then(t=>{if(t){var s,r;(null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.refreshToken)&&a(e.config,null==t?void 0:null===(r=t.user)||void 0===r?void 0:r.refreshToken)}}),c.refreshToken().then(e=>e).then(t=>(a(e.config,t.accessToken),i.A.request(e.config))).catch(()=>{});console.log("8 refresh ::::")}}else{if(console.log("3 refresh ::::"),"Network Error"===e.message)throw console.log("4 refresh ::::"),console.error("Network error - server is probably down"),e;throw console.log("5 refresh ::::"),console.error("Unknown error",e),e}return e.response})},m=function(e){if(e.status>=200&&e.status<300)return e;throw e.data};class h{static getInstance(){return h.instance||(h.instance=i.A.create({baseURL:"https://arrow-agency-back-production.up.railway.app/api/",timeout:12e4})),h.instance}}let x=e=>{o(e),u(e)};class p{responseHandler(e){let{data:t}=e;return t}async get(e,t){return m(await this._httpClient.get(e,t))}async post(e,t,s){return m(await this._httpClient.post(e,t,s))}async patch(e,t,s){return m(await this._httpClient.patch(e,t,s))}async put(e,t,s){return m(await this._httpClient.put(e,t,s))}async delete(e,t,s){let r=s||{};return t&&(r.data=t),m(await this._httpClient.delete(e,r))}constructor(){this._httpClient=h.getInstance(),x(this._httpClient)}}let g=new p},5482:(e,t,s)=>{"use strict";s.d(t,{ApplicantsProvider:()=>i,B:()=>d});var r=s(5155),a=s(2115),l=s(7923),n=s(2615);let o=(0,a.createContext)({applicants:[],loading:!1,error:null,page:1,setPage:()=>{},limit:6,setLimit:()=>{},type:"asc",setType:()=>{},technologies:[],setTechnologies:()=>{},pages:1,fetchApplicants:async()=>{}}),i=e=>{let{children:t}=e,[s,i]=(0,a.useState)([]),[d,c]=(0,a.useState)(!0),[u,m]=(0,a.useState)(null),[h,x]=(0,a.useState)(1),[p,g]=(0,a.useState)(6),[f,v]=(0,a.useState)("asc"),[b,j]=(0,a.useState)([]),[w,N]=(0,a.useState)(1),{data:y,status:k}=(0,n.useSession)(),S=async()=>{c(!0);try{var e;if(null==y?void 0:null===(e=y.user)||void 0===e?void 0:e.accessToken){let e=await l.K.get("applicant",{params:{page:h,limit:p,type:f,technologies:b}});i(e.data.results||[]),N(e.data.pages||1)}}catch(e){console.error("Error fetching applicants:",e),m("Failed to fetch applicants.")}finally{c(!1)}};return(0,a.useEffect)(()=>{"authenticated"===k&&S()},[k,y,h,p,f,b]),(0,r.jsx)(o.Provider,{value:{applicants:s,loading:d,error:u,page:h,setPage:x,limit:p,setLimit:g,type:f,setType:v,technologies:b,setTechnologies:j,pages:w,fetchApplicants:S},children:t})},d=()=>(0,a.useContext)(o)},6657:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var r=s(5155),a=s(2615);s(2115);let l=e=>(0,r.jsx)(a.SessionProvider,{children:e.children})},1620:(e,t,s)=>{"use strict";s.d(t,{ProfileProvider:()=>d,x:()=>c});var r=s(5155),a=s(2115),l=s(6046),n=s(2615),o=s(7923);let i=(0,a.createContext)({profile:null,loading:!1,fetchProfile:async()=>{}}),d=e=>{let{children:t}=e,s=(0,l.useRouter)(),{data:d,status:c}=(0,n.useSession)(),[u,m]=(0,a.useState)(null),[h,x]=(0,a.useState)(!0),p=async()=>{x(!0);try{var e;if(null==d?void 0:null===(e=d.user)||void 0===e?void 0:e.accessToken){let e=await o.K.get("user/profile");m(e.data)}}catch(e){console.error("Error fetching profile data:",e)}finally{x(!1)}};return(0,a.useEffect)(()=>{if("unauthenticated"===c){s.replace("/");return}"authenticated"===c&&p()},[c,d,s]),(0,r.jsx)(i.Provider,{value:{profile:u,loading:h,fetchProfile:p},children:t})},c=()=>(0,a.useContext)(i)},9324:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[261,825,260,334,441,517,358],()=>t(2327)),_N_E=e.O()}]);