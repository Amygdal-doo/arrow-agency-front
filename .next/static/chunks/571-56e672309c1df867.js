"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{5041:(e,r,a)=>{a.d(r,{A:()=>g});var t=a(5155),s=a(9606),n=a(3415),l=a(2679),o=a(2115),i=a(7923),d=a(1620),c=a(5565),m=a(5482);let u=n.z.object({name:n.z.string().min(2,{message:"Name must be at least 2 characters."}),logoId:n.z.string().min(2,{message:"Logo must be selected."}),templateId:n.z.string().min(2,{message:"Template must be selected."}),companyName:n.z.string().min(2,{message:"Company Name must be at least 2 characters."}),surname:n.z.string().min(2,{message:"Surname must be at least 2 characters."}),email:n.z.string().email({message:"Invalid email address."}),phone:n.z.string().min(6,{message:"Phone number must be valid."}),file:n.z.instanceof(File,{message:"File is required and must be a PDF."}).refine(e=>"application/pdf"===e.type,{message:"Only PDF files are allowed."}),technologies:n.z.array(n.z.string()).optional()}),g=e=>{var r;let{onClose:a}=e,{profile:n}=(0,d.x)(),[g,p]=(0,o.useState)(null),[h,x]=(0,o.useState)([]),[f,y]=(0,o.useState)(""),[b,v]=(0,o.useState)(!1),[w,j]=(0,o.useState)(null),[N,k]=(0,o.useState)(!1),[C,S]=(0,o.useState)(""),{fetchApplicants:z}=(0,m.B)(),T=[{id:"cv2",name:"Modern Template"},{id:"cv3",name:"Professional Template"},{id:"cv4",name:"Creative Template"}],{register:L,handleSubmit:P,setValue:A,setError:E,clearErrors:I,formState:{errors:F}}=(0,s.mN)({resolver:(0,l.u)(u),defaultValues:{companyName:"",name:"",surname:"",email:"",phone:"",technologies:[],logoId:"",templateId:""}}),_=async e=>{console.log("Form Data:",e);try{let r=new FormData;r.append("name",e.name),r.append("companyName",e.companyName),r.append("surname",e.surname),r.append("email",e.email),r.append("phone",e.phone),r.append("logoId",e.logoId),r.append("templateId",e.templateId),e.file&&r.append("file",e.file),e.technologies&&e.technologies.length>0&&e.technologies.forEach(e=>r.append("technologies[]",e));let t=await i.K.post("applicant/create",r,{headers:{"Content-Type":"multipart/form-data"}});return console.log("CV Saved Successfully:",t.data),a(),z(),t.data}catch(e){throw console.error("Error saving CV:",e),e}},D=()=>{if(""!==f.trim()){let e=[...h,f];x(e),A("technologies",e),y("")}},B=e=>{let r=h.filter((r,a)=>a!==e);x(r),A("technologies",r)};return(0,t.jsxs)("div",{className:"space-y-6 p-8 max-h-[90vh]",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Create CV"}),(0,t.jsx)("div",{className:"h-px flex-1 bg-gray-700 mx-4"})]}),(0,t.jsxs)("form",{onSubmit:P(_),className:"space-y-6 overflow-x-auto max-h-[80vh]",children:[(0,t.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700/50 shadow-lg relative z-20",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-4",children:"CV Template"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{onClick:()=>k(!N),className:"bg-gray-700/50 border border-gray-600/50 rounded-lg p-4 text-gray-300 cursor-pointer flex items-center justify-between",children:[(0,t.jsx)("span",{className:C?"text-gray-300":"text-gray-500",children:C?null===(r=T.find(e=>e.id===C))||void 0===r?void 0:r.name:"Select Template"}),(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform ".concat(N?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),N&&(0,t.jsx)("div",{className:"absolute z-50 w-full mt-2 bg-gray-800 backdrop-blur-sm border border-gray-700 rounded-lg shadow-xl",children:T.map(e=>(0,t.jsx)("div",{onClick:()=>{S(e.id),A("templateId",e.id),k(!1)},className:"p-4 cursor-pointer hover:bg-gray-700 transition-colors text-gray-300",children:e.name},e.id))})]}),F.templateId&&(0,t.jsx)("p",{className:"mt-1 text-red-400 text-sm",children:F.templateId.message})]}),(0,t.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700/50 shadow-lg relative z-10",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-4",children:"Company Logo"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{onClick:()=>v(!b),className:"bg-gray-700/50 border border-gray-600/50 rounded-lg p-4 text-gray-300 cursor-pointer flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-3",children:w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.default,{src:w.url,alt:w.name,width:40,height:40,className:"rounded-md"}),(0,t.jsx)("span",{children:w.name})]}):(0,t.jsx)("span",{className:"text-gray-500",children:"Select Company Logo"})}),(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform ".concat(b?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&(null==n?void 0:n.companyLogos)&&(0,t.jsx)("div",{className:"absolute z-50 w-full mt-2 bg-gray-800 backdrop-blur-sm border border-gray-700 rounded-lg shadow-xl",children:n.companyLogos.map(e=>(0,t.jsxs)("div",{onClick:()=>{j(e),v(!1),A("logoId",e.id)},className:"flex items-center gap-3 p-4 cursor-pointer hover:bg-gray-700 transition-colors",children:[(0,t.jsx)(c.default,{src:e.url,alt:e.name,width:40,height:40,className:"rounded-md"}),(0,t.jsx)("span",{className:"text-gray-300",children:e.name})]},e.id))})]})]}),(0,t.jsx)("div",{className:"bg-gray-800/50 backdrop-blur-sm relative z-0 rounded-xl p-6 border border-gray-700/50 shadow-lg",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{...L("companyName"),placeholder:"Company Name",className:"w-full bg-gray-700/50 border border-gray-600/50 rounded-lg p-3 text-gray-300 placeholder-gray-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"}),F.companyName&&(0,t.jsx)("p",{className:"mt-1 text-red-400 text-sm",children:F.companyName.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{...L("name"),placeholder:"First Name",className:"w-full bg-gray-700/50 border border-gray-600/50 rounded-lg p-3 text-gray-300 placeholder-gray-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"}),F.name&&(0,t.jsx)("p",{className:"mt-1 text-red-400 text-sm",children:F.name.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{...L("surname"),placeholder:"Last Name",className:"w-full bg-gray-700/50 border border-gray-600/50 rounded-lg p-3 text-gray-300 placeholder-gray-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"}),F.surname&&(0,t.jsx)("p",{className:"mt-1 text-red-400 text-sm",children:F.surname.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{...L("email"),type:"email",placeholder:"Email",className:"w-full bg-gray-700/50 border border-gray-600/50 rounded-lg p-3 text-gray-300 placeholder-gray-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"}),F.email&&(0,t.jsx)("p",{className:"mt-1 text-red-400 text-sm",children:F.email.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{...L("phone"),placeholder:"Phone Number",className:"w-full bg-gray-700/50 border border-gray-600/50 rounded-lg p-3 text-gray-300 placeholder-gray-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"}),F.phone&&(0,t.jsx)("p",{className:"mt-1 text-red-400 text-sm",children:F.phone.message})]})]})}),(0,t.jsxs)("div",{className:"bg-gray-800/50  relative z-0 backdrop-blur-sm rounded-xl p-6 border border-gray-700/50 shadow-lg",children:[(0,t.jsx)("input",{type:"file",accept:".pdf",onChange:e=>{var r;let a=null===(r=e.target.files)||void 0===r?void 0:r[0];if(!a){E("file",{type:"manual",message:"File is required and must be a PDF."});return}if("application/pdf"!==a.type){E("file",{type:"manual",message:"Only PDF files are allowed."});return}p(a.name),A("file",a),I("file")},className:"hidden",id:"file-upload"}),(0,t.jsxs)("label",{htmlFor:"file-upload",className:"w-full bg-gray-700/50 border border-gray-600/50 rounded-lg p-3 text-gray-300 flex items-center justify-center cursor-pointer hover:bg-gray-700 transition-all",children:[(0,t.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Upload PDF Resume"]}),g&&(0,t.jsxs)("p",{className:"mt-2 text-orange-400 text-sm flex items-center",children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),g]}),F.file&&(0,t.jsx)("p",{className:"mt-1 text-red-400 text-sm",children:F.file.message})]}),(0,t.jsxs)("div",{className:"bg-gray-800/50 relative z-0 backdrop-blur-sm rounded-xl p-6 border border-gray-700/50 shadow-lg",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-4",children:"Technologies"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:f,onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),D())},placeholder:"Add technology",className:"w-4/5 bg-gray-700/50 border border-gray-600/50 rounded-lg p-3 text-gray-300 placeholder-gray-500 focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all"}),(0,t.jsx)("button",{type:"button",onClick:D,className:"px-1 sm:px-4 w-1/5 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg font-medium hover:from-orange-700 hover:to-orange-800 transition-all duration-200",children:"Add"})]}),(0,t.jsx)("div",{className:"mt-4 flex flex-wrap gap-2",children:h.map((e,r)=>(0,t.jsxs)("div",{className:"group bg-gray-700/50 px-3 py-1.5 rounded-lg flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-gray-300",children:e}),(0,t.jsx)("button",{type:"button",onClick:()=>B(r),className:"text-gray-400 hover:text-red-400 transition-colors",children:"\xd7"})]},r))})]}),(0,t.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-orange-600 to-orange-700 text-white p-3 rounded-lg font-medium hover:from-orange-700 hover:to-orange-800 transition-all duration-200 shadow-lg",children:"Create CV"})]})]})}},531:(e,r,a)=>{a.d(r,{A:()=>n});var t=a(5155),s=a(3753);let n=e=>{let{isOpen:r,onClose:a,children:n}=e;return r?(0,t.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-[#0a0a23] bg-opacity-50 z-50 m-4",children:(0,t.jsxs)("div",{className:"relative bg-gray-900 rounded-lg shadow-lg w-full max-w-lg mx-auto",children:[(0,t.jsx)("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700","aria-label":"Close",children:(0,t.jsx)(s.A,{className:"w-6 h-6"})}),n]})}):null}},7923:(e,r,a)=>{a.d(r,{K:()=>x});var t=a(2615);let s=(e,r)=>{r&&e.headers&&(e.headers.Authorization="Bearer ".concat(r))},n={token:null,expiry:0},l=async()=>{let e=Date.now();if(n.token&&n.expiry>e)return n.token;let r=await (0,t.getSession)();return r&&r.user.accessToken?(n.token=r.user.accessToken,n.expiry=e+3e5,n.token):null},o=e=>{e.interceptors.request.use(async e=>{try{let r=await l();r&&s(e,r)}catch(e){console.error("Error fetching token",e)}return e},e=>Promise.reject(e))};var i=a(2651);class d{async refreshToken(){return x.responseHandler(await x.get("auth/refresh"))}}let c=new d,m=async e=>{let r=await (0,t.getSession)(),a=null==r?void 0:r.user.refreshToken;e.interceptors.response.use(e=>e,async e=>{if(console.log("2 refresh ::::"),e.response){if(401===e.response.status){if(a)return await (0,t.getSession)().then(r=>{if(r){var a,t;(null==r?void 0:null===(a=r.user)||void 0===a?void 0:a.refreshToken)&&s(e.config,null==r?void 0:null===(t=r.user)||void 0===t?void 0:t.refreshToken)}}),c.refreshToken().then(e=>e).then(r=>(s(e.config,r.accessToken),i.A.request(e.config))).catch(()=>{});console.log("8 refresh ::::")}}else{if(console.log("3 refresh ::::"),"Network Error"===e.message)throw console.log("4 refresh ::::"),console.error("Network error - server is probably down"),e;throw console.log("5 refresh ::::"),console.error("Unknown error",e),e}return e.response})},u=function(e){if(e.status>=200&&e.status<300)return e;throw e.data};class g{static getInstance(){return g.instance||(g.instance=i.A.create({baseURL:"https://arrow-agency-back-production.up.railway.app/api/",timeout:12e4})),g.instance}}let p=e=>{o(e),m(e)};class h{responseHandler(e){let{data:r}=e;return r}async get(e,r){return u(await this._httpClient.get(e,r))}async post(e,r,a){return u(await this._httpClient.post(e,r,a))}async patch(e,r,a){return u(await this._httpClient.patch(e,r,a))}async put(e,r,a){return u(await this._httpClient.put(e,r,a))}async delete(e,r,a){let t=a||{};return r&&(t.data=r),u(await this._httpClient.delete(e,t))}constructor(){this._httpClient=g.getInstance(),p(this._httpClient)}}let x=new h},6046:(e,r,a)=>{var t=a(6658);a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}})},5482:(e,r,a)=>{a.d(r,{ApplicantsProvider:()=>i,B:()=>d});var t=a(5155),s=a(2115),n=a(7923),l=a(2615);let o=(0,s.createContext)({applicants:[],loading:!1,error:null,page:1,setPage:()=>{},limit:6,setLimit:()=>{},type:"asc",setType:()=>{},technologies:[],setTechnologies:()=>{},pages:1,fetchApplicants:async()=>{}}),i=e=>{let{children:r}=e,[a,i]=(0,s.useState)([]),[d,c]=(0,s.useState)(!0),[m,u]=(0,s.useState)(null),[g,p]=(0,s.useState)(1),[h,x]=(0,s.useState)(6),[f,y]=(0,s.useState)("asc"),[b,v]=(0,s.useState)([]),[w,j]=(0,s.useState)(1),{data:N,status:k}=(0,l.useSession)(),C=async()=>{c(!0);try{var e;if(null==N?void 0:null===(e=N.user)||void 0===e?void 0:e.accessToken){let e=await n.K.get("applicant",{params:{page:g,limit:h,type:f,technologies:b}});i(e.data.results||[]),j(e.data.pages||1)}}catch(e){console.error("Error fetching applicants:",e),u("Failed to fetch applicants.")}finally{c(!1)}};return(0,s.useEffect)(()=>{"authenticated"===k&&C()},[k,N,g,h,f,b]),(0,t.jsx)(o.Provider,{value:{applicants:a,loading:d,error:m,page:g,setPage:p,limit:h,setLimit:x,type:f,setType:y,technologies:b,setTechnologies:v,pages:w,fetchApplicants:C},children:r})},d=()=>(0,s.useContext)(o)},1620:(e,r,a)=>{a.d(r,{ProfileProvider:()=>d,x:()=>c});var t=a(5155),s=a(2115),n=a(6046),l=a(2615),o=a(7923);let i=(0,s.createContext)({profile:null,loading:!1,fetchProfile:async()=>{}}),d=e=>{let{children:r}=e,a=(0,n.useRouter)(),{data:d,status:c}=(0,l.useSession)(),[m,u]=(0,s.useState)(null),[g,p]=(0,s.useState)(!0),h=async()=>{p(!0);try{var e;if(null==d?void 0:null===(e=d.user)||void 0===e?void 0:e.accessToken){let e=await o.K.get("user/profile");u(e.data)}}catch(e){console.error("Error fetching profile data:",e)}finally{p(!1)}};return(0,s.useEffect)(()=>{if("unauthenticated"===c){a.replace("/");return}"authenticated"===c&&h()},[c,d,a]),(0,t.jsx)(i.Provider,{value:{profile:m,loading:g,fetchProfile:h},children:r})},c=()=>(0,s.useContext)(i)},3753:(e,r,a)=>{a.d(r,{A:()=>i});var t=a(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return r.filter((e,r,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===r).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,t.forwardRef)((e,r)=>{let{color:a="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:d="",children:c,iconNode:m,...u}=e;return(0,t.createElement)("svg",{ref:r,...l,width:s,height:s,stroke:a,strokeWidth:i?24*Number(o)/Number(s):o,className:n("lucide",d),...u},[...m.map(e=>{let[r,a]=e;return(0,t.createElement)(r,a)}),...Array.isArray(c)?c:[c]])}),i=((e,r)=>{let a=(0,t.forwardRef)((a,l)=>{let{className:i,...d}=a;return(0,t.createElement)(o,{ref:l,iconNode:r,className:n("lucide-".concat(s(e)),i),...d})});return a.displayName="".concat(e),a})("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}}]);